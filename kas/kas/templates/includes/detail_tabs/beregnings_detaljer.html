{% load i18n %}
<table class="table table-bordered table-hover table-striped" style="width: auto;">
    <thead>
    <tr class="table-info">
        <th>{% trans 'Beskrivelse' %}</th>
        <th>{% trans 'Værdi / beløb' %}</th>
        <th>{% trans 'Enhed' %}</th>
        <th>{% trans 'Forklaring' %}</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <th>{{ pension_company_amount_label }}</th>
        <td class="text-right">{{ policy.prefilled_amount }}</td>
        <td>{% trans 'kr' %}</td>
        <td>{% trans 'Udfyldes fra R75' %}</td>
    </tr>
    <tr>
        <th>{{ self_reported_amount_label }}</th>
        <td class="text-right">{{ policy.self_reported_amount|default_if_none:'' }}</td>
        <td>{% trans 'kr' %}</td>
        <td>{% trans 'Selvangivet beløb fra borgeren' %}</td>
    </tr>
    <tr class="table-info">
        <td colspan="4" class="text-center">{% blocktrans with amount=policy.get_active_amount_display %}Beløb brugt til beregning: {{ amount }}{% endblocktrans %}</td>
    </tr>
    <tr>
        <th>{% trans 'Startbeløb' %}</th>
        <td class="text-right">{{ calculation.initial_amount }}</td>
        <td>{% trans 'kr' %}</td>
        <td>{% blocktrans with amount=polciy.get_active_amount_display %}Beløb for hele året ({{ amount }}){% endblocktrans %}</td>
    </tr>
    <tr>
        <th>{% blocktrans with year=policy.year %}Antal dage i {{ year }}{% endblocktrans %}</th>
        <td class="text-right">{{ calculation.days_in_year }}</td>
        <td>{% trans 'dage' %}</td>
        <td></td>
    </tr>
    <tr>
        <th>{% blocktrans with year=policy.year %}Borgerens skattepligtige dage i {{ year }}{% endblocktrans %}</th>
        <td class="text-right">{{  calculation.taxable_days_in_year }}</td>
        <td>{% trans 'dage' %}</td>
        <td></td>
    </tr>
    <tr>
        <th>{% trans 'Justeringsfaktor for antal skattepligtige dage' %}</th>
        <td class="text-right">{{ calculation.tax_days_adjust_factor }}</td>
        <td></td>
        <td> {% blocktrans with year=policy.year taxable_days=calculation.taxable_days_in_year days=calculation.days_in_year %}Skattepligtige dage ({{ taxable_days }}) / Dage i {{ year }} ({{ days }}){% endblocktrans %}</td>
    </tr>
    <tr>
        <th>{% trans 'Beløb justeret for år' %}</th>
        <td class="text-right">{{ calculation.year_adjusted_amount }}</td>
        <td>{% trans 'kr' %}</td>
        <td>{% blocktrans with amount=calculation.initial_amount tax_days=calculation.tax_days_adjust_factor %}Beløb for hele året ({{ amount }}) &times; Justeringsfaktor for antal dage ({{ tax_days }}){% endblocktrans %}</td>
    </tr>
    <tr>
        <th>{% trans 'Tilgængeligt negativt afkast' %}</th>
        <td class="text-right">{{ calculation.available_negative_return }}</td>
        <td>{% trans 'kr' %}</td>
        <td>{% trans 'Se tabel nedenfor' %}</td>
    </tr>
    <tr>
        <th>{% trans 'Anvendt negativt afkast' %}</th>
        <td class="text-right">{{ calculation.used_negative_return }}</td>
        <td>{% trans 'kr' %}</td>
        <td>{% trans 'Maksimalt det fulde skattepligtige beløb' %}</td>
    </tr>
    <tr>
        <th>{% trans 'Skattegrundlag efter justering for negativt afkast' %}</th>
        <td class="text-right">{{ calculation.taxable_amount }}</td>
        <td>{% trans 'kr' %}</td>
        <td>{% blocktrans with amount=calculation.year_adjusted_amount return=calculation.used_negative_return %}Beløb justeret for dage ({{ amount }}) - anvendt negativt afkast ({{ return }}){% endblocktrans %}</td>
    </tr>
    <tr>
        <th>{% trans 'Skat før fraregning af skat betalt i udlandet' %}</th>
        <td class="text-right">{{ calculation.full_tax }}</td>
        <td>{% trans 'kr' %}</td>
        <td>{% blocktrans with amount=calculation.taxable_amount %}15,3% af skattegrundlag efter justering for negativt afkast ({{ amount }}){% endblocktrans %}</td>
    </tr>
    <tr>
        <th>{% trans 'Skat betalt i udlandet' %}</th>
        <td class="text-right">{{ calculation.foreign_paid_amount }}</td>
        <td>{% trans 'kr' %}</td>
        <td>{% trans 'Selvangivet beløb' %}</td>
    </tr>
    <tr>
        <th>{% trans 'Skat fratrukket betaling i udland' %}</th>
        <td class="text-right">{{ calculation.tax_with_deductions }}</td>
        <td>{% trans 'kr' %}</td>
        <td>{% blocktrans with tax=calculation.full_tax paid=calculation.foreign_paid_amount %}Skat før fraregning af skat betalt i udlandet ({{ tax }}) - Skat betalt i udlandet ({{ paid }}){% endblocktrans %}</td>
    </tr>
    <th>{% trans 'I alt til betaling' %}</th>
    <td class="text-right">{{ calculation.tax_with_deductions }}</td>
    <td>{% trans 'kr' %}</td>
    <td></td>
    </tbody>
</table>
